"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[591],{43881:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(96540);var n=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})),r=a(54015);var s=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}));var o=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})),i=a(26156),c=a(68777),m=a(34267),d=a(63532),u=a(70870),v=a(92744);var g=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}));var p=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}));var h=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))})),f=a(42489),E=a(36647);var b=e=>{let{metadata:t}=e;const a=(0,u.Tt)(),n=(t.files||[]).map(((e,t)=>l.createElement("div",{key:"metafilesrow"+t,className:"text-primary "},((e,t)=>{const n=e.extension,r=["image"].includes(e.type),s=["code"].includes(e.type),o=["csv"].includes(e.type),i=["pdf"].includes(e.type),c=["video"].includes(e.type),m=e.name||"unknown",d=e.path||"unknown";let u=null,v=l.createElement("div",null,"image"===e.type?l.createElement(g,{className:"h-4 mr-1 inline-block"}):l.createElement(p,{className:"h-4 mr-1 inline-block"})," ",l.createElement("span",{className:"break-all "},m)," "),b=l.createElement("div",{className:"p-2 bg-secondary rounded flex items-center justify-center   h-full"},l.createElement("div",{className:""},l.createElement("div",{style:{fontSize:"2em"},className:"  text-center mb-2"},e.extension),l.createElement("div",null,v)));return r?(u=l.createElement("div",null,l.createElement("div",{className:"mb-2"},v),l.createElement(f.$N,{src:a+"/"+d,className:"w-full rounded"})),b=u):c?(u=l.createElement("div",{className:"mb-2"},l.createElement("a",{href:a+"/"+d},v),l.createElement("video",{controls:!0,className:"w-full rounded"},l.createElement("source",{src:a+"/"+d,type:"video/"+n}),"Your browser does not support the video tag.")),b=l.createElement("div",{className:"   relative rounded   h-full"},l.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},v),l.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary "},l.createElement(h,{className:"h-14 w-14"})))):o?(u=l.createElement("div",{className:"h"},l.createElement("a",{href:a+"/"+d},l.createElement("div",{className:"mb-4"},v)),l.createElement(f.Il,{csvUrl:a+"/"+d,className:"w-full rounded"})),b=l.createElement("div",{className:"   relative rounded   h-full"},l.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},v),l.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary  h-full w-full rounded  flex items-center justify-center text-primary"},l.createElement(E.A,{icon:"csv",size:14})))):s?(u=l.createElement("div",{className:"h"},l.createElement("a",{href:a+"/"+d,target:"_blank",rel:"noopener noreferrer"},l.createElement("div",{className:"mb-4"},v)),l.createElement(f.vK,{url:a+"/"+d,className:"w-full rounded"})),b=l.createElement("div",{className:"   relative rounded   h-full"},l.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},v),l.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary  h-full w-full rounded  flex items-center justify-center text-primary"},l.createElement(E.A,{icon:"python",size:14})))):i?(u=l.createElement("div",{className:"h-full"},l.createElement("div",{className:"mb-4"},l.createElement("a",{href:a+"/"+d,target:"_blank",rel:"noopener noreferrer"},v)),l.createElement(f.H6,{url:a+"/"+d})),b=l.createElement("div",{className:"   relative rounded   h-full"},l.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},v),l.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary "},l.createElement(E.A,{icon:"pdf",size:14})))):u=l.createElement("span",null,"Unsupported file type."),l.createElement("div",{className:"  h-full rounded"},l.createElement(f.GM,{className:"mb-1",icon:b,title:m},u))})(e)))),r=(t.messages||[]).map(((e,t)=>{var a;return l.createElement("div",{className:" mb-2 border-dashed",key:"messagerow"+t},l.createElement(f.Jk,{title:l.createElement("div",{className:"rounded p-1 px-2 inline-block text-xs bg-secondary"},l.createElement("span",{className:"font-semibold"},e.sender)," ( to"," ",e.recipient," )"),className:"m"},l.createElement(f.pO,{data:null===(a=e.message)||void 0===a?void 0:a.content,className:"text-sm"})))})),s=n.length>0,o=r.length>0;return l.createElement("div",null,o&&l.createElement("div",{className:"rounded   bg-primary  "},l.createElement(f.Jv,{open:!1,title:"Agent Messages ("+r.length+" message"+(r.length>1?"s":"")+") | "+(0,u.a3)(null==t?void 0:t.time)},r)),s&&l.createElement("div",{className:"rounded bg-primary p-2"},l.createElement(f.Jv,{open:!0,title:"Results ("+n.length+" file"+(n.length>1?"s":"")+")"},l.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},n))))},x=a(78992);var y=e=>{let{initMessages:t,editable:a=!0}=e;const g=(0,x.J)((e=>e.session)),p=l.useRef(null),h=l.useRef(null),{user:E}=l.useContext(v.v),y=(0,u.Tt)(),[w,N]=l.useState(!1),[k,j]=l.useState(""),[A,C]=l.useState({status:!0,message:"All good"}),_=(0,x.J)((e=>e.messages)),L=(0,x.J)((e=>e.setMessages)),H=(0,x.J)((e=>e.workflowConfig));let M,O;"undefined"!=typeof window&&(M=window.innerHeight,O=M-300+"px");l.useEffect((()=>{const e=(e=>null==e?void 0:e.map((e=>{let t;try{t=JSON.parse(e.metadata)}catch(a){t=e.metadata}return{text:e.content,sender:"user"===e.role?"user":"bot",metadata:t,msg_id:e.msg_id}})))(t);L(e)}),[t]);const R=u.Mj.map(((e,t)=>l.createElement(c.Ay,{key:"prompt"+t,type:"primary",className:"",onClick:()=>{B(e.prompt)}}," ",e.title," "))),S=null==_?void 0:_.map(((e,t)=>{const r="user"===e.sender,s=r?"bg-accent text-white  ":"bg-light";let o=!1;var i,c,d;e.metadata&&(o=null!==e.metadata.code||(null===(i=e.metadata.images)||void 0===i?void 0:i.length)>0||(null===(c=e.metadata.files)||void 0===c?void 0:c.length)>0||(null===(d=e.metadata.scripts)||void 0===d?void 0:d.length)>0);let u=[];r&&u.push({label:l.createElement("div",{onClick:()=>{console.log("retrying"),B(e.text)}},l.createElement(n,{role:"button",title:"Retry",className:"h-4 w-4 mr-1 inline-block"}),"Retry"),key:"retrymessage"});const v=l.createElement(m.A,{menu:{items:u},trigger:["click"],placement:"bottomRight"},l.createElement("div",{role:"button",className:"float-right ml-2 duration-100 hover:bg-secondary font-semibold px-2 pb-1  rounded"},l.createElement("span",{className:"block -mt-2 text-primary  "}," ...")));return l.createElement("div",{className:"align-right "+(r?"text-righpt":"")+"  mb-2 border-b",key:"message"+t}," ",l.createElement("div",{className:"  "+(r?"":" w-full")+" inline-flex gap-2"},l.createElement("div",{className:""}),l.createElement("div",{className:"font-semibold text-secondary text-sm w-16"},r?"USER":"AGENTS"),l.createElement("div",{className:"inline-block group relative "+(r?"":" w-full ")+" p-2 rounded  "+s}," ",u.length>0&&a&&l.createElement("div",{className:" group-hover:opacity-100 opacity-0 "},v),r&&l.createElement(l.Fragment,null,l.createElement("div",{className:"inline-block"},e.text)),!r&&l.createElement("div",{className:" w-full chatbox prose dark:prose-invert text-primary rounded "},l.createElement(f.pO,{className:"text-sm",data:e.text,showCode:!1})),e.metadata&&l.createElement("div",{className:""},l.createElement(b,{metadata:e.metadata})))))}));l.useEffect((()=>{setTimeout((()=>{J()}),200)}),[_]);const I="50px";l.useEffect((()=>{!1===w&&p.current&&p.current&&(null===A||A&&!1===A.status)&&(p.current.value="",p.current.style.height=I)}),[w]),l.useEffect((()=>{if(p.current){p.current.style.height=I;const e=p.current.scrollHeight;p.current.style.height=e+"px"}}),[k]);const J=()=>{var e;null===(e=h.current)||void 0===e||e.scroll({top:h.current.scrollHeight,behavior:"smooth"})},B=e=>{C(null);let t=Object.assign([],_);const a={text:e,sender:"user",msg_id:(0,u.Os)()};t.push(a),L(t);const l={role:"user",content:e,msg_id:a.msg_id,user_id:(null==E?void 0:E.email)||"",root_msg_id:"0",session_id:(null==g?void 0:g.id)||""},n=y+"/messages",r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:l,flow_config:H})};N(!0),fetch(n,r).then((e=>{N(!1),200===e.status?e.json().then((e=>{if(e&&e.status){const a={text:e.message,sender:"bot",metadata:e.metadata,msg_id:e.msg_id};t.push(a),t=Object.assign([],t),L(t)}else console.log("error",e),d.Ay.error(e.message)})):(e.json().then((e=>{console.log("error",e),d.Ay.error(e.message)})),d.Ay.error("Connection error. Ensure server is up and running."))})).catch((()=>{N(!1),d.Ay.error("Connection error. Ensure server is up and running.")}))};return l.createElement("div",{className:"text-primary     relative  h-full rounded  "},l.createElement("div",{style:{zIndex:100},className:" absolute right-0  text-secondary -top-8 rounded p-2"}," ",l.createElement("div",{className:"text-xs"}," ",null==g?void 0:g.flow_config.name)),l.createElement("div",{style:{zIndex:100},className:" absolute right-0  text-secondary -top-8 rounded p-2"}," ",l.createElement("div",{className:"text-xs"}," ",null==g?void 0:g.flow_config.name)),l.createElement("div",{ref:h,className:"flex h-full  flex-col rounded  scroll pr-2 overflow-auto  ",style:{minHeight:"300px",maxHeight:O}},l.createElement("div",{className:"scroll-gradient h-10"}," ",l.createElement("span",{className:"  inline-block h-6"})," "),l.createElement("div",{className:"flex-1  boder mt-4"}),!_&&null!==_&&l.createElement("div",{className:"w-full text-center boder mt-4"},l.createElement("div",null," ",l.createElement(f.g0,null)),"loading messages"),_&&0===(null==_?void 0:_.length)&&l.createElement("div",{className:"ml-2 text-sm text-secondary "},l.createElement(r.A,{className:"inline-block h-6 mr-2"}),"No messages in the current session. Start a conversation to begin."),l.createElement("div",{className:"ml-2"}," ",S),l.createElement("div",{className:"ml-2 h-6   mb-4 mt-2   "},w&&l.createElement(f.g0,null))),a&&l.createElement("div",{className:"mt-2 p-2 absolute   bg-primary  bottom-0 w-full"},l.createElement("div",{className:"rounded p-2 shadow-lg flex mb-1  gap-2 "+(w?" opacity-50 pointer-events-none":"")},l.createElement("form",{autoComplete:"on",className:"flex-1 relative",onSubmit:e=>{e.preventDefault()}},l.createElement("textarea",{id:"queryInput",name:"queryInput",autoComplete:"on",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||p.current&&!w&&(e.preventDefault(),B(p.current.value))},onChange:e=>{j(e.target.value)},placeholder:"Write message here...",ref:p,className:"flex items-center w-full resize-none text-gray-600 bg-white p-2 ring-2 rounded-sm pl-5 pr-16",style:{maxHeight:"120px",overflowY:"auto"}}),l.createElement("div",{role:"button",style:{width:"45px",height:"35px"},title:"Send message",onClick:()=>{p.current&&!w&&B(p.current.value)},className:"absolute right-3 bottom-2 bg-accent hover:brightness-75 transition duration-300 rounded cursor-pointer flex justify-center items-center"}," ",!w&&l.createElement("div",{className:"inline-block  "},l.createElement(s,{className:"h-6 w-6 text-white "})," "),w&&l.createElement("div",{className:"inline-block   "},l.createElement(o,{className:"text-white animate-spin rounded-full h-6 w-6"})))))," ",l.createElement("div",null,l.createElement("div",{className:"mt-2 text-xs text-secondary"},"Blank slate? Try one of the example prompts below"," "),l.createElement("div",{className:"mt-2 inline-flex gap-2 flex-wrap  "+(w?"brightness-75 pointer-events-none":"")},R)),A&&!A.status&&l.createElement("div",{className:"p-2 border rounded mt-4 text-orange-500 text-sm"}," ",l.createElement(i.A,{className:"h-5 text-orange-500 inline-block mr-2"})," ",A.message)))}},85575:function(e,t,a){var l=a(96540);const n=l.forwardRef((function({title:e,titleId:t,...a},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}));t.A=n}}]);
//# sourceMappingURL=6c05b3ab656a8bfc225a64b3d73a36a92f83c05e-f06908a9da766324ed01.js.map
{"version":3,"file":"component---src-pages-gallery-index-tsx-480455c98d1f657356fd.js","mappings":"gSA8MA,MAjMoBA,IAAwB,IAAvB,SAAEC,GAAeD,EACpC,MAAME,GAAYC,EAAAA,EAAAA,OACZ,KAAEC,GAASC,EAAAA,WAAiBC,EAAAA,IAC3BC,EAASC,GAAcH,EAAAA,UAAe,IACtCI,EAASC,GAAcL,EAAAA,SAAsC,OAC7DM,EAAgBC,GACrBP,EAAAA,SAAoC,MAChCQ,EAAoBX,EAAS,qBAAoBE,aAAI,EAAJA,EAAMU,QACtDC,EAAOC,GAAYX,EAAAA,SAA+B,CACvDY,QAAQ,EACRC,QAAS,cAEJC,EAAkBC,GAAuBf,EAAAA,SAC9C,MAGFA,EAAAA,WAAgB,KAEd,MACMgB,EADY,IAAIC,gBAAgBrB,EAASsB,QACnBC,IAAI,MAE5BH,GAEFI,EAAaJ,GACbD,EAAoBC,IAIpBI,EAAa,KACf,GACC,IAEH,MAAMA,EAAgBJ,IACpB,MAAMK,EAAkBL,EACjBnB,EAAS,uBAAuBmB,EACnCR,EACJG,EAAS,MACTR,GAAW,IA8BXmB,EAAAA,EAAAA,IAAUD,EA5BM,CACdE,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAIDC,IACbA,GAAQA,EAAKb,QAEfc,QAAQC,IAAI,UAAWF,GACnBT,EAEFT,EAAkBkB,EAAKA,KAAK,IAE5BpB,EAAWoB,EAAKA,OAIlBZ,EAAAA,GAAQH,MAAMe,EAAKZ,SAErBV,GAAW,EAAM,IAEFyB,IACfjB,EAASiB,GACTf,EAAAA,GAAQH,MAAMkB,EAAIf,SAClBV,GAAW,EAAM,GAEoC,EAGnD0B,EAAiBC,IAAuC,IAAtC,KAAEC,GAA8BD,EACtD,OACE9B,EAAAA,cAAA,WACEA,EAAAA,cAAA,OAAKgC,UAAU,gBAAe,yBACLD,EAAKE,SAASC,OAAO,4BAA0B,KACrEC,EAAAA,EAAAA,IAAQJ,EAAKK,YAEhBpC,EAAAA,cAAA,OAAKgC,UAAU,IACbhC,EAAAA,cAACqC,EAAAA,EAAO,CAACC,aAAcP,EAAKE,SAAUM,UAAU,KAE9C,EAIJC,EAAWC,IAAmC,IAAlC,KAAEC,GAA0BD,EAC5C,MAAME,EAAWD,EAAKE,KAAI,CAACC,EAAaC,IAEpC9C,EAAAA,cAAA,OAAK+C,IAAK,MAAQD,EAAOd,UAAU,qBACjChC,EAAAA,cAAA,QAAMgC,UAAU,gDACba,MAKT,OAAO7C,EAAAA,cAAA,OAAKgC,UAAU,kBAAkBW,EAAe,EAGnDK,EAAc5C,aAAO,EAAPA,EAASwC,KAAI,CAACb,EAAoBe,KAAmB,IAADG,EAAAC,EACtE,MAAMC,GAAa7C,aAAc,EAAdA,EAAgB8C,MAAOrB,EAAKqB,GAC/C,OACEpD,EAAAA,cAAA,OAAK+C,IAAK,aAAeD,EAAOd,UAAU,IACxChC,EAAAA,cAACqD,EAAAA,GAAI,CACHC,OAAQH,EACRI,QAASA,KACPhD,EAAkBwB,IAElByB,EAAAA,EAAAA,UAAS,eAAezB,EAAKqB,GAAK,EAEpCpB,UAAU,4BACVyB,OAAOC,EAAAA,EAAAA,KAA6B,QAAhBT,EAAAlB,EAAKE,SAAS,UAAE,IAAAgB,OAAA,EAAhBA,EAAkBU,UAAW,GAAI,KAErD3D,EAAAA,cAAA,OAAKgC,UAAU,QACZ,KACA0B,EAAAA,EAAAA,KAA6B,QAAhBR,EAAAnB,EAAKE,SAAS,UAAE,IAAAiB,OAAA,EAAhBA,EAAkBS,UAAW,GAAI,KAEjD3D,EAAAA,cAAA,OAAKgC,UAAU,WACZ,IACAD,EAAKE,SAASC,OAAO,WAASH,EAAKE,SAASC,OAAS,GAAK,KAE7DlC,EAAAA,cAAA,OAAKgC,UAAU,8DACbhC,EAAAA,cAACwC,EAAQ,CAACE,KAAMX,EAAKW,OAAS,KAEhC1C,EAAAA,cAAA,OAAKgC,UAAU,YAAWG,EAAAA,EAAAA,IAAQJ,EAAKK,aAErC,IAIV,OACEpC,EAAAA,cAAA,OAAKgC,UAAU,KACbhC,EAAAA,cAAA,OAAKgC,UAAU,iBAAgB,WAI9B1B,GACCN,EAAAA,cAAA,OAAKgC,UAAU,iBACbhC,EAAAA,cAAC4D,EAAAA,GAAM,CACLC,KAAK,UACLN,QAASA,KACPhD,EAAkB,OAElBiD,EAAAA,EAAAA,UAAS,cAAcM,KAAKC,OACxBjD,IACFM,EAAa,MACbL,EAAoB,MACtB,EAEFiB,UAAU,2CAEVhC,EAAAA,cAACgE,EAAAA,EAAe,CAAChC,UAAU,wBAAwB,qBAMvD1B,GACAN,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,WAAK,iEAC4D,KAEjEA,EAAAA,cAAA,OAAKgC,UAAU,4EACZgB,IAKN5C,GAA8B,IAAnBA,EAAQ8B,QAClBlC,EAAAA,cAAA,OAAKgC,UAAU,6CACbhC,EAAAA,cAACiE,EAAAA,EAAqB,CAACjC,UAAU,wBAAwB,gFAM5D1B,GACCN,EAAAA,cAAA,OAAKgC,UAAU,sBACbhC,EAAAA,cAAC6B,EAAc,CAACE,KAAMzB,KAIzBJ,GACCF,EAAAA,cAAA,OAAKgC,UAAU,iCACbhC,EAAAA,cAAA,WACG,IACDA,EAAAA,cAACkE,EAAAA,GAAY,OACT,mBAIN,EC/KV,MArBoBvE,IAA6B,IAA5B,SAAEC,EAAQ,KAAE6B,GAAW9B,EAC1C,OACEK,EAAAA,cAACmE,EAAAA,EAAM,CAACC,KAAM3C,EAAK4C,KAAKC,aAAcb,MAAM,UAAUc,KAAM,YAC1DvE,EAAAA,cAAA,QAAMwE,MAAO,CAAEC,OAAQ,QAAUzC,UAAU,YACzChC,EAAAA,cAAC0E,EAAW,CAAC9E,SAAUA,KAElB,C","sources":["webpack://AutoGen_Studio/./src/components/views/gallery/gallery.tsx","webpack://AutoGen_Studio/./src/pages/gallery/index.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { appContext } from \"../../../hooks/provider\";\nimport { fetchJSON, getServerUrl, timeAgo, truncateText } from \"../../utils\";\nimport { IGalleryItem, IStatus } from \"../../types\";\nimport { Button, message } from \"antd\";\nimport { BounceLoader, Card } from \"../../atoms\";\nimport {\n  ChevronLeftIcon,\n  InformationCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { navigate } from \"gatsby\";\nimport ChatBox from \"../playground/chatbox\";\n\nconst GalleryView = ({ location }: any) => {\n  const serverUrl = getServerUrl();\n  const { user } = React.useContext(appContext);\n  const [loading, setLoading] = React.useState(false);\n  const [gallery, setGallery] = React.useState<null | IGalleryItem[]>(null);\n  const [currentGallery, setCurrentGallery] =\n    React.useState<null | IGalleryItem>(null);\n  const listGalleryUrl = `${serverUrl}/gallery?user_id=${user?.email}`;\n  const [error, setError] = React.useState<IStatus | null>({\n    status: true,\n    message: \"All good\",\n  });\n  const [currentGalleryId, setCurrentGalleryId] = React.useState<string | null>(\n    null\n  );\n\n  React.useEffect(() => {\n    // get gallery id from url\n    const urlParams = new URLSearchParams(location.search);\n    const galleryId = urlParams.get(\"id\");\n\n    if (galleryId) {\n      // Fetch gallery details using the galleryId\n      fetchGallery(galleryId);\n      setCurrentGalleryId(galleryId);\n    } else {\n      // Redirect to an error page or home page if the id is not found\n      // navigate(\"/\");\n      fetchGallery(null);\n    }\n  }, []);\n\n  const fetchGallery = (galleryId: string | null) => {\n    const fetchGalleryUrl = galleryId\n      ? `${serverUrl}/gallery?gallery_id=${galleryId}`\n      : listGalleryUrl;\n    setError(null);\n    setLoading(true);\n    // const fetch;\n    const payLoad = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    const onSuccess = (data: any) => {\n      if (data && data.status) {\n        // message.success(data.message);\n        console.log(\"gallery\", data);\n        if (galleryId) {\n          // Set the currently viewed gallery item\n          setCurrentGallery(data.data[0]);\n        } else {\n          setGallery(data.data);\n        }\n        // Set the list of gallery items\n      } else {\n        message.error(data.message);\n      }\n      setLoading(false);\n    };\n    const onError = (err: any) => {\n      setError(err);\n      message.error(err.message);\n      setLoading(false);\n    };\n    fetchJSON(fetchGalleryUrl, payLoad, onSuccess, onError);\n  };\n\n  const GalleryContent = ({ item }: { item: IGalleryItem }) => {\n    return (\n      <div>\n        <div className=\"mb-4 text-sm\">\n          This session contains {item.messages.length} messages and was created{\" \"}\n          {timeAgo(item.timestamp)}\n        </div>\n        <div className=\"\">\n          <ChatBox initMessages={item.messages} editable={false} />\n        </div>\n      </div>\n    );\n  };\n\n  const TagsView = ({ tags }: { tags: string[] }) => {\n    const tagsView = tags.map((tag: string, index: number) => {\n      return (\n        <div key={\"tag\" + index} className=\"mr-2 inline-block\">\n          <span className=\"text-xs bg-secondary border px-3 p-1 rounded\">\n            {tag}\n          </span>\n        </div>\n      );\n    });\n    return <div className=\"flex flex-wrap\">{tagsView}</div>;\n  };\n\n  const galleryRows = gallery?.map((item: IGalleryItem, index: number) => {\n    const isSelected = currentGallery?.id === item.id;\n    return (\n      <div key={\"galleryrow\" + index} className=\"\">\n        <Card\n          active={isSelected}\n          onClick={() => {\n            setCurrentGallery(item);\n            // add to history\n            navigate(`/gallery?id=${item.id}`);\n          }}\n          className=\"h-full p-2 cursor-pointer\"\n          title={truncateText(item.messages[0]?.content || \"\", 20)}\n        >\n          <div className=\"my-2\">\n            {\" \"}\n            {truncateText(item.messages[0]?.content || \"\", 80)}\n          </div>\n          <div className=\"text-xs\">\n            {\" \"}\n            {item.messages.length} message{item.messages.length > 1 && \"s\"}\n          </div>\n          <div className=\"my-2 border-t border-dashed w-full pt-2 inline-flex gap-2 \">\n            <TagsView tags={item.tags} />{\" \"}\n          </div>\n          <div className=\"text-xs\">{timeAgo(item.timestamp)}</div>\n        </Card>\n      </div>\n    );\n  });\n\n  return (\n    <div className=\" \">\n      <div className=\"mb-4 text-2xl\">Gallery</div>\n\n      {/* back to gallery button */}\n\n      {currentGallery && (\n        <div className=\"mb-4   w-full\">\n          <Button\n            type=\"primary\"\n            onClick={() => {\n              setCurrentGallery(null);\n              // add to history\n              navigate(`/gallery?_=${Date.now()}`);\n              if (currentGalleryId) {\n                fetchGallery(null);\n                setCurrentGalleryId(null);\n              }\n            }}\n            className=\"bg-primary text-white px-2 py-1 rounded\"\n          >\n            <ChevronLeftIcon className=\"h-4 w-4 inline mr-1\" />\n            Back to gallery\n          </Button>\n        </div>\n      )}\n\n      {!currentGallery && (\n        <>\n          <div>\n            View a collection of AutoGen agent specifications and sessions{\" \"}\n          </div>\n          <div className=\"mt-4 grid gap-3 grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6\">\n            {galleryRows}\n          </div>\n        </>\n      )}\n\n      {gallery && gallery.length === 0 && (\n        <div className=\"text-sm border rounded text-secondary p-2\">\n          <InformationCircleIcon className=\"h-4 w-4 inline mr-1\" />\n          No gallery items found. Please create a chat session and publish to\n          gallery.\n        </div>\n      )}\n\n      {currentGallery && (\n        <div className=\"mt-4 border-t pt-2\">\n          <GalleryContent item={currentGallery} />\n        </div>\n      )}\n\n      {loading && (\n        <div className=\"w-full text-center boder mt-4\">\n          <div>\n            {\" \"}\n            <BounceLoader />\n          </div>\n          loading gallery\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GalleryView;\n","import * as React from \"react\";\nimport { graphql } from \"gatsby\";\nimport Layout from \"../../components/layout\";\nimport GalleryView from \"../../components/views/gallery/gallery\";\n\n// markup\nconst GalleryPage = ({ location, data }: any) => {\n  return (\n    <Layout meta={data.site.siteMetadata} title=\"Gallery\" link={\"/gallery\"}>\n      <main style={{ height: \"100%\" }} className=\" h-full \">\n        <GalleryView location={location} />\n      </main>\n    </Layout>\n  );\n};\n\nexport const query = graphql`\n  query HomePageQuery {\n    site {\n      siteMetadata {\n        description\n        title\n      }\n    }\n  }\n`;\n\nexport default GalleryPage;\n"],"names":["_ref","location","serverUrl","getServerUrl","user","React","appContext","loading","setLoading","gallery","setGallery","currentGallery","setCurrentGallery","listGalleryUrl","email","error","setError","status","message","currentGalleryId","setCurrentGalleryId","galleryId","URLSearchParams","search","get","fetchGallery","fetchGalleryUrl","fetchJSON","method","headers","data","console","log","err","GalleryContent","_ref2","item","className","messages","length","timeAgo","timestamp","ChatBox","initMessages","editable","TagsView","_ref3","tags","tagsView","map","tag","index","key","galleryRows","_item$messages$","_item$messages$2","isSelected","id","Card","active","onClick","navigate","title","truncateText","content","Button","type","Date","now","ChevronLeftIcon","InformationCircleIcon","BounceLoader","Layout","meta","site","siteMetadata","link","style","height","GalleryView"],"sourceRoot":""}
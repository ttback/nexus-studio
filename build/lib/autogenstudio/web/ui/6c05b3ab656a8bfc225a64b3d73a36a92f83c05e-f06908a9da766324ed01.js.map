{"version":3,"file":"6c05b3ab656a8bfc225a64b3d73a36a92f83c05e-f06908a9da766324ed01.js","mappings":"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","sources":["webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/ArrowPathIcon.js","webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/PaperAirplaneIcon.js","webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/Cog6ToothIcon.js","webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/PhotoIcon.js","webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/DocumentTextIcon.js","webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/VideoCameraIcon.js","webpack://AutoGen_Studio/./src/components/views/playground/metadata.tsx","webpack://AutoGen_Studio/./src/components/views/playground/chatbox.tsx","webpack://AutoGen_Studio/./node_modules/@heroicons/react/24/outline/esm/ChevronLeftIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n  }));\n}\nconst ForwardRef = React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PaperAirplaneIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5\"\n  }));\n}\nconst ForwardRef = React.forwardRef(PaperAirplaneIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Cog6ToothIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(Cog6ToothIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PhotoIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(PhotoIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentTextIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(DocumentTextIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction VideoCameraIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(VideoCameraIcon);\nexport default ForwardRef;","import {\n  DocumentTextIcon,\n  PhotoIcon,\n  VideoCameraIcon,\n} from \"@heroicons/react/24/outline\";\nimport * as React from \"react\";\nimport {\n  CodeBlock,\n  CodeLoader,\n  CsvLoader,\n  CollapseBox,\n  ExpandView,\n  GroupView,\n  ImageLoader,\n  MarkdownView,\n  PdfViewer,\n} from \"../../atoms\";\nimport { formatDuration, getServerUrl } from \"../../utils\";\nimport { IMetadataFile } from \"../../types\";\nimport Icon from \"../../icons\";\n\nconst MetaDataView = ({ metadata }: { metadata: any | null }) => {\n  const serverUrl = getServerUrl();\n  const renderFileContent = (file: IMetadataFile, i: number) => {\n    const file_type = file.extension;\n    const is_image = [\"image\"].includes(file.type);\n    const is_code = [\"code\"].includes(file.type);\n    const is_csv = [\"csv\"].includes(file.type);\n    const is_pdf = [\"pdf\"].includes(file.type);\n    const is_video = [\"video\"].includes(file.type);\n    const file_name = file.name || \"unknown\";\n    const file_path = file.path || \"unknown\";\n\n    let fileView = null;\n    let fileTitle = (\n      <div>\n        {file.type === \"image\" ? (\n          <PhotoIcon className=\"h-4 mr-1 inline-block\" />\n        ) : (\n          <DocumentTextIcon className=\"h-4 mr-1 inline-block\" />\n        )}{\" \"}\n        <span className=\"break-all \">{file_name}</span>{\" \"}\n      </div>\n    );\n    let icon = (\n      <div className=\"p-2 bg-secondary rounded flex items-center justify-center   h-full\">\n        <div className=\"\">\n          <div style={{ fontSize: \"2em\" }} className=\"  text-center mb-2\">\n            {file.extension}\n          </div>\n          <div>{fileTitle}</div>\n        </div>\n      </div>\n    );\n    if (is_image) {\n      fileView = (\n        <div>\n          <div className=\"mb-2\">{fileTitle}</div>\n          <ImageLoader\n            src={`${serverUrl}/${file_path}`}\n            className=\"w-full rounded\"\n          />\n        </div>\n      );\n      icon = fileView;\n    } else if (is_video) {\n      fileView = (\n        <div className=\"mb-2\">\n          <a href={`${serverUrl}/${file_path}`}>{fileTitle}</a>\n          <video controls className=\"w-full rounded\">\n            <source\n              src={`${serverUrl}/${file_path}`}\n              type={`video/${file_type}`}\n            />\n            Your browser does not support the video tag.\n          </video>\n        </div>\n      );\n\n      // Update icon to show a video-related icon\n      icon = (\n        <div className=\"   relative rounded   h-full\">\n          <div className=\"absolute rounded p-2 bg-secondary top-0 \">\n            {fileTitle}\n          </div>\n          <div\n            style={{ minHeight: \"150px\" }}\n            className=\"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary \"\n          >\n            <VideoCameraIcon className=\"h-14 w-14\" />\n          </div>\n        </div>\n      );\n    } else if (is_csv) {\n      fileView = (\n        <div className=\"h\">\n          <a href={`${serverUrl}/${file_path}`}>\n            <div className=\"mb-4\">{fileTitle}</div>\n          </a>\n          <CsvLoader\n            csvUrl={`${serverUrl}/${file_path}`}\n            className=\"w-full rounded\"\n          />\n        </div>\n      );\n      icon = (\n        <div className=\"   relative rounded   h-full\">\n          <div className=\"absolute rounded p-2 bg-secondary top-0 \">\n            {fileTitle}\n          </div>\n          <div\n            style={{ minHeight: \"150px\" }}\n            className=\"bg-secondary  h-full w-full rounded  flex items-center justify-center text-primary\"\n          >\n            <Icon icon=\"csv\" size={14} />\n          </div>\n        </div>\n      );\n    } else if (is_code) {\n      fileView = (\n        <div className=\"h\">\n          <a\n            href={`${serverUrl}/${file_path}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <div className=\"mb-4\">{fileTitle}</div>\n          </a>\n          <CodeLoader\n            url={`${serverUrl}/${file_path}`}\n            className=\"w-full rounded\"\n          />\n        </div>\n      );\n      icon = (\n        <div className=\"   relative rounded   h-full\">\n          <div className=\"absolute rounded p-2 bg-secondary top-0 \">\n            {fileTitle}\n          </div>\n          <div\n            style={{ minHeight: \"150px\" }}\n            className=\"bg-secondary  h-full w-full rounded  flex items-center justify-center text-primary\"\n          >\n            <Icon icon=\"python\" size={14} />\n          </div>\n        </div>\n      );\n    } else if (is_pdf) {\n      fileView = (\n        <div className=\"h-full\">\n          <div className=\"mb-4\">\n            <a\n              href={`${serverUrl}/${file_path}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {fileTitle}\n            </a>\n          </div>\n          <PdfViewer url={`${serverUrl}/${file_path}`} />\n        </div>\n      );\n\n      icon = (\n        <div className=\"   relative rounded   h-full\">\n          <div className=\"absolute rounded p-2 bg-secondary top-0 \">\n            {fileTitle}\n          </div>\n          <div\n            style={{ minHeight: \"150px\" }}\n            className=\"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary \"\n          >\n            <Icon icon=\"pdf\" size={14} />\n          </div>\n        </div>\n      );\n    } else {\n      fileView = <span>Unsupported file type.</span>;\n    }\n\n    return (\n      <div className=\"  h-full rounded\">\n        <ExpandView className=\"mb-1\" icon={icon} title={file_name}>\n          {fileView}\n        </ExpandView>\n      </div>\n    );\n  };\n\n  const renderFile = (file: IMetadataFile, i: number) => (\n    <div key={\"metafilesrow\" + i} className=\"text-primary \">\n      {renderFileContent(file, i)}\n    </div>\n  );\n\n  const files = (metadata.files || []).map(renderFile);\n\n  const messages = (metadata.messages || []).map((message: any, i: number) => {\n    return (\n      <div className=\" mb-2 border-dashed\" key={\"messagerow\" + i}>\n        <GroupView\n          title={\n            <div className=\"rounded p-1 px-2 inline-block text-xs bg-secondary\">\n              <span className=\"font-semibold\">{message.sender}</span> ( to{\" \"}\n              {message.recipient} )\n            </div>\n          }\n          className=\"m\"\n        >\n          <MarkdownView data={message.message?.content} className=\"text-sm\" />\n        </GroupView>\n      </div>\n    );\n  });\n\n  const hasContent = files.length > 0;\n  const hasMessages = messages.length > 0;\n\n  return (\n    <div>\n      {hasMessages && (\n        <div className=\"rounded   bg-primary  \">\n          <CollapseBox\n            open={false}\n            title={`Agent Messages (${messages.length} message${\n              messages.length > 1 ? \"s\" : \"\"\n            }) | ${formatDuration(metadata?.time)}`}\n          >\n            {messages}\n          </CollapseBox>\n        </div>\n      )}\n      {hasContent && (\n        <div className=\"rounded bg-primary p-2\">\n          <CollapseBox\n            open={true}\n            title={`Results (${files.length} file${\n              files.length > 1 ? \"s\" : \"\"\n            })`}\n          >\n            <div className=\"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n              {files}\n            </div>\n          </CollapseBox>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MetaDataView;\n","import {\n  ArrowPathIcon,\n  Cog6ToothIcon,\n  ExclamationTriangleIcon,\n  InformationCircleIcon,\n  PaperAirplaneIcon,\n  TrashIcon,\n} from \"@heroicons/react/24/outline\";\nimport { Button, Dropdown, MenuProps, message } from \"antd\";\nimport * as React from \"react\";\nimport {\n  IChatMessage,\n  IChatSession,\n  IFlowConfig,\n  IMessage,\n  IStatus,\n} from \"../../types\";\nimport { examplePrompts, fetchJSON, getServerUrl, guid } from \"../../utils\";\nimport { appContext } from \"../../../hooks/provider\";\nimport MetaDataView from \"./metadata\";\nimport { BounceLoader, MarkdownView } from \"../../atoms\";\nimport { useConfigStore } from \"../../../hooks/store\";\n\nconst ChatBox = ({\n  initMessages,\n  editable = true,\n}: {\n  initMessages: IMessage[] | null;\n  editable?: boolean;\n}) => {\n  const session: IChatSession | null = useConfigStore((state) => state.session);\n  const textAreaInputRef = React.useRef<HTMLTextAreaElement>(null);\n  const messageBoxInputRef = React.useRef<HTMLDivElement>(null);\n  const { user } = React.useContext(appContext);\n\n  const serverUrl = getServerUrl();\n  const deleteMsgUrl = `${serverUrl}/messages/delete`;\n\n  const [loading, setLoading] = React.useState(false);\n  const [text, setText] = React.useState(\"\");\n  const [error, setError] = React.useState<IStatus | null>({\n    status: true,\n    message: \"All good\",\n  });\n\n  const messages = useConfigStore((state) => state.messages);\n  const setMessages = useConfigStore((state) => state.setMessages);\n  const workflowConfig: IFlowConfig | null = useConfigStore(\n    (state) => state.workflowConfig\n  );\n\n  let pageHeight, chatMaxHeight;\n  if (typeof window !== \"undefined\") {\n    pageHeight = window.innerHeight;\n    chatMaxHeight = pageHeight - 300 + \"px\";\n  }\n\n  const parseMessages = (messages: any) => {\n    return messages?.map((message: any) => {\n      let meta;\n      try {\n        meta = JSON.parse(message.metadata);\n      } catch (e) {\n        meta = message.metadata;\n      }\n      const msg: IChatMessage = {\n        text: message.content,\n        sender: message.role === \"user\" ? \"user\" : \"bot\",\n        metadata: meta,\n        msg_id: message.msg_id,\n      };\n      return msg;\n    });\n  };\n\n  React.useEffect(() => {\n    // console.log(\"initMessages changed\", initMessages);\n    const initMsgs: IChatMessage[] = parseMessages(initMessages);\n    setMessages(initMsgs);\n  }, [initMessages]);\n\n  const promptButtons = examplePrompts.map((prompt, i) => {\n    return (\n      <Button\n        key={\"prompt\" + i}\n        type=\"primary\"\n        className=\"\"\n        onClick={() => {\n          getCompletion(prompt.prompt);\n        }}\n      >\n        {\" \"}\n        {prompt.title}{\" \"}\n      </Button>\n    );\n  });\n\n  const messageListView = messages?.map((message: IChatMessage, i: number) => {\n    const isUser = message.sender === \"user\";\n    const css = isUser ? \"bg-accent text-white  \" : \"bg-light\";\n    // console.log(\"message\", message);\n    let hasMeta = false;\n    if (message.metadata) {\n      hasMeta =\n        message.metadata.code !== null ||\n        message.metadata.images?.length > 0 ||\n        message.metadata.files?.length > 0 ||\n        message.metadata.scripts?.length > 0;\n    }\n\n    let items: MenuProps[\"items\"] = [];\n\n    if (isUser) {\n      items.push({\n        label: (\n          <div\n            onClick={() => {\n              console.log(\"retrying\");\n              getCompletion(message.text);\n            }}\n          >\n            <ArrowPathIcon\n              role={\"button\"}\n              title={\"Retry\"}\n              className=\"h-4 w-4 mr-1 inline-block\"\n            />\n            Retry\n          </div>\n        ),\n        key: \"retrymessage\",\n      });\n    }\n\n    const menu = (\n      <Dropdown menu={{ items }} trigger={[\"click\"]} placement=\"bottomRight\">\n        <div\n          role=\"button\"\n          className=\"float-right ml-2 duration-100 hover:bg-secondary font-semibold px-2 pb-1  rounded\"\n        >\n          <span className=\"block -mt-2 text-primary  \"> ...</span>\n        </div>\n      </Dropdown>\n    );\n\n    return (\n      <div\n        className={`align-right ${isUser ? \"text-righpt\" : \"\"}  mb-2 border-b`}\n        key={\"message\" + i}\n      >\n        {\" \"}\n        <div className={`  ${isUser ? \"\" : \" w-full\"} inline-flex gap-2`}>\n          <div className=\"\"></div>\n          <div className=\"font-semibold text-secondary text-sm w-16\">{`${\n            isUser ? \"USER\" : \"AGENTS\"\n          }`}</div>\n          <div\n            className={`inline-block group relative ${\n              isUser ? \"\" : \" w-full \"\n            } p-2 rounded  ${css}`}\n          >\n            {\" \"}\n            {items.length > 0 && editable && (\n              <div className=\" group-hover:opacity-100 opacity-0 \">{menu}</div>\n            )}\n            {isUser && (\n              <>\n                <div className=\"inline-block\">{message.text}</div>\n              </>\n            )}\n            {!isUser && (\n              <div\n                className={` w-full chatbox prose dark:prose-invert text-primary rounded `}\n              >\n                <MarkdownView\n                  className=\"text-sm\"\n                  data={message.text}\n                  showCode={false}\n                />\n              </div>\n            )}\n            {message.metadata && (\n              <div className=\"\">\n                <MetaDataView metadata={message.metadata} />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  React.useEffect(() => {\n    // console.log(\"messages updated, scrolling\");\n\n    setTimeout(() => {\n      scrollChatBox();\n    }, 200);\n  }, [messages]);\n\n  const textAreaDefaultHeight = \"50px\";\n  // clear text box if loading has just changed to false and there is no error\n  React.useEffect(() => {\n    if (loading === false && textAreaInputRef.current) {\n      if (textAreaInputRef.current) {\n        if (error === null || (error && error.status === false)) {\n          textAreaInputRef.current.value = \"\";\n          textAreaInputRef.current.style.height = textAreaDefaultHeight;\n        }\n      }\n    }\n  }, [loading]);\n\n  React.useEffect(() => {\n    if (textAreaInputRef.current) {\n      textAreaInputRef.current.style.height = textAreaDefaultHeight; // Reset height to shrink if text is deleted\n      const scrollHeight = textAreaInputRef.current.scrollHeight;\n      textAreaInputRef.current.style.height = `${scrollHeight}px`;\n    }\n  }, [text]);\n\n  const chatHistory = (messages: IChatMessage[] | null) => {\n    let history = \"\";\n    messages?.forEach((message) => {\n      history += message.text + \"\\n\"; // message.sender + \": \" + message.text + \"\\n\";\n    });\n    return history;\n  };\n\n  const scrollChatBox = () => {\n    messageBoxInputRef.current?.scroll({\n      top: messageBoxInputRef.current.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  const getCompletion = (query: string) => {\n    setError(null);\n    let messageHolder = Object.assign([], messages);\n\n    const userMessage: IChatMessage = {\n      text: query,\n      sender: \"user\",\n      msg_id: guid(),\n    };\n    messageHolder.push(userMessage);\n    setMessages(messageHolder);\n\n    const messagePayload: IMessage = {\n      role: \"user\",\n      content: query,\n      msg_id: userMessage.msg_id,\n      user_id: user?.email || \"\",\n      root_msg_id: \"0\",\n      session_id: session?.id || \"\",\n    };\n\n    const textUrl = `${serverUrl}/messages`;\n    const postData = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        message: messagePayload,\n        flow_config: workflowConfig,\n      }),\n    };\n    setLoading(true);\n    fetch(textUrl, postData)\n      .then((res) => {\n        setLoading(false);\n        if (res.status === 200) {\n          res.json().then((data) => {\n            if (data && data.status) {\n              const botMesage: IChatMessage = {\n                text: data.message,\n                sender: \"bot\",\n                metadata: data.metadata,\n                msg_id: data.msg_id,\n              };\n              // if (data.metadata) {\n              //   setMetadata(data.metadata);\n              // }\n              messageHolder.push(botMesage);\n              messageHolder = Object.assign([], messageHolder);\n              setMessages(messageHolder);\n            } else {\n              console.log(\"error\", data);\n              // setError(data);\n              message.error(data.message);\n            }\n          });\n        } else {\n          res.json().then((data) => {\n            console.log(\"error\", data);\n            // setError(data);\n            message.error(data.message);\n          });\n          message.error(\"Connection error. Ensure server is up and running.\");\n        }\n      })\n      .catch(() => {\n        setLoading(false);\n\n        message.error(\"Connection error. Ensure server is up and running.\");\n      });\n  };\n\n  const handleTextChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement>\n  ): void => {\n    setText(event.target.value);\n  };\n\n  const handleKeyDown = (\n    event: React.KeyboardEvent<HTMLTextAreaElement>\n  ): void => {\n    if (event.key === \"Enter\" && !event.shiftKey) {\n      if (textAreaInputRef.current && !loading) {\n        event.preventDefault();\n        getCompletion(textAreaInputRef.current.value);\n      }\n    }\n  };\n\n  return (\n    <div className=\"text-primary     relative  h-full rounded  \">\n      <div\n        style={{ zIndex: 100 }}\n        className=\" absolute right-0  text-secondary -top-8 rounded p-2\"\n      >\n        {\" \"}\n        <div className=\"text-xs\"> {session?.flow_config.name}</div>\n      </div>\n      <div\n        style={{ zIndex: 100 }}\n        className=\" absolute right-0  text-secondary -top-8 rounded p-2\"\n      >\n        {\" \"}\n        <div className=\"text-xs\"> {session?.flow_config.name}</div>\n      </div>\n      <div\n        ref={messageBoxInputRef}\n        className=\"flex h-full  flex-col rounded  scroll pr-2 overflow-auto  \"\n        style={{ minHeight: \"300px\", maxHeight: chatMaxHeight }}\n      >\n        <div className=\"scroll-gradient h-10\">\n          {\" \"}\n          <span className=\"  inline-block h-6\"></span>{\" \"}\n        </div>\n        <div className=\"flex-1  boder mt-4\"></div>\n        {!messages && messages !== null && (\n          <div className=\"w-full text-center boder mt-4\">\n            <div>\n              {\" \"}\n              <BounceLoader />\n            </div>\n            loading messages\n          </div>\n        )}\n\n        {messages && messages?.length === 0 && (\n          <div className=\"ml-2 text-sm text-secondary \">\n            <InformationCircleIcon className=\"inline-block h-6 mr-2\" />\n            No messages in the current session. Start a conversation to begin.\n          </div>\n        )}\n        <div className=\"ml-2\"> {messageListView}</div>\n        <div className=\"ml-2 h-6   mb-4 mt-2   \">\n          {loading && <BounceLoader />}\n        </div>\n      </div>\n      {editable && (\n        <div className=\"mt-2 p-2 absolute   bg-primary  bottom-0 w-full\">\n          <div\n            className={`rounded p-2 shadow-lg flex mb-1  gap-2 ${\n              loading ? \" opacity-50 pointer-events-none\" : \"\"\n            }`}\n          >\n            {/* <input className=\"flex-1 p-2 ring-2\" /> */}\n            <form\n              autoComplete=\"on\"\n              className=\"flex-1 relative\"\n              onSubmit={(e) => {\n                e.preventDefault();\n              }}\n            >\n              <textarea\n                id=\"queryInput\"\n                name=\"queryInput\"\n                autoComplete=\"on\"\n                onKeyDown={handleKeyDown}\n                onChange={handleTextChange}\n                placeholder=\"Write message here...\"\n                ref={textAreaInputRef}\n                className=\"flex items-center w-full resize-none text-gray-600 bg-white p-2 ring-2 rounded-sm pl-5 pr-16\"\n                style={{ maxHeight: \"120px\", overflowY: \"auto\" }}\n              />\n              <div\n                role={\"button\"}\n                style={{ width: \"45px\", height: \"35px\" }}\n                title=\"Send message\"\n                onClick={() => {\n                  if (textAreaInputRef.current && !loading) {\n                    getCompletion(textAreaInputRef.current.value);\n                  }\n                }}\n                className=\"absolute right-3 bottom-2 bg-accent hover:brightness-75 transition duration-300 rounded cursor-pointer flex justify-center items-center\"\n              >\n                {\" \"}\n                {!loading && (\n                  <div className=\"inline-block  \">\n                    <PaperAirplaneIcon className=\"h-6 w-6 text-white \" />{\" \"}\n                  </div>\n                )}\n                {loading && (\n                  <div className=\"inline-block   \">\n                    <Cog6ToothIcon className=\"text-white animate-spin rounded-full h-6 w-6\" />\n                  </div>\n                )}\n              </div>\n            </form>\n          </div>{\" \"}\n          <div>\n            <div className=\"mt-2 text-xs text-secondary\">\n              Blank slate? Try one of the example prompts below{\" \"}\n            </div>\n            <div\n              className={`mt-2 inline-flex gap-2 flex-wrap  ${\n                loading ? \"brightness-75 pointer-events-none\" : \"\"\n              }`}\n            >\n              {promptButtons}\n            </div>\n          </div>\n          {error && !error.status && (\n            <div className=\"p-2 border rounded mt-4 text-orange-500 text-sm\">\n              {\" \"}\n              <ExclamationTriangleIcon className=\"h-5 text-orange-500 inline-block mr-2\" />{\" \"}\n              {error.message}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\nexport default ChatBox;\n","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 19.5 8.25 12l7.5-7.5\"\n  }));\n}\nconst ForwardRef = React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;"],"names":["title","titleId","props","svgRef","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","_ref","metadata","serverUrl","getServerUrl","files","map","renderFile","file","i","React","key","className","renderFileContent","file_type","extension","is_image","includes","type","is_code","is_csv","is_pdf","is_video","file_name","name","file_path","path","fileView","fileTitle","PhotoIcon","DocumentTextIcon","icon","style","fontSize","ImageLoader","src","href","controls","minHeight","VideoCameraIcon","CsvLoader","csvUrl","Icon","size","target","rel","CodeLoader","url","PdfViewer","ExpandView","messages","message","_message$message","GroupView","sender","recipient","MarkdownView","data","content","hasContent","length","hasMessages","CollapseBox","open","formatDuration","time","initMessages","editable","session","useConfigStore","state","textAreaInputRef","messageBoxInputRef","user","appContext","loading","setLoading","text","setText","error","setError","status","setMessages","workflowConfig","pageHeight","chatMaxHeight","window","innerHeight","initMsgs","meta","JSON","parse","e","role","msg_id","parseMessages","promptButtons","examplePrompts","prompt","Button","onClick","getCompletion","messageListView","isUser","css","hasMeta","_message$metadata$ima","_message$metadata$fil","_message$metadata$scr","code","images","scripts","items","push","label","console","log","ArrowPathIcon","menu","Dropdown","trigger","placement","showCode","MetaDataView","setTimeout","scrollChatBox","textAreaDefaultHeight","current","value","height","scrollHeight","_messageBoxInputRef$c","scroll","top","behavior","query","messageHolder","userMessage","guid","messagePayload","user_id","email","root_msg_id","session_id","textUrl","postData","method","headers","Accept","body","stringify","flow_config","fetch","then","res","json","botMesage","catch","zIndex","maxHeight","BounceLoader","InformationCircleIcon","autoComplete","onSubmit","preventDefault","onKeyDown","event","shiftKey","onChange","placeholder","overflowY","width","PaperAirplaneIcon","Cog6ToothIcon","ExclamationTriangleIcon","ForwardRef"],"sourceRoot":""}